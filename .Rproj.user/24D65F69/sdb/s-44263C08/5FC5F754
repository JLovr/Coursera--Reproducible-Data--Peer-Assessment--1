{
    "contents" : "# Analysis of Daily Step Activity as Measured by Activity Monitoring Devices\n\nThe purpose of this analysis is give the student the opportunity to gain practice with producing R Markdown documents in an acceptable form.  To that effect we are provided data on movement recorded from devices worn by unknown individuals who record these movements for a variety of reasons. \n\n\n**Data**\n\nThe data for this assignment can be downloaded from the course web site Dataset:\n\n[Data for Course Peer Assessment 1](https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2Factivity.zip) [52K] \n\n*Source: Johns Hopkins Course Reproducible Research Peer Assessment #1 from the Readme - R. Peng  *\n\n>This assignment makes use of data from a personal activity monitoring device. This device collects data at 5 minute intervals through out the day. The data consists of two months of data from an anonymous individual collected during the months of October and November, 2012 and include the number of steps taken in 5 minute intervals each day.\n>The variables included in this dataset are:\n\n> * steps: Number of steps taking in a 5-minute interval (missing values are coded as NA)\n> * date: The date on which the measurement was taken in YYYY-MM-DD format\n> * interval: Identifier for the 5-minute interval in which measurement was taken\n\n>The dataset is stored in a comma-separated-value (CSV) file and there are a total of 17,568 observations in this dataset.\n\n## Load and Process the Data\n```{r loadandprocess, echo=TRUE}\n## load required libraries\nlibrary(ggplot2)\n##library(data.table)\n\n##read data, do preliminary eximination\nraw.data<-read.csv(\"activity.csv\")\nhead(raw.data)\nnrow(raw.data)\nsummary(raw.data)\n\n## set date context for easier processing\nwdata<-raw.data\nwdata$date<-as.Date(wdata$date,\"%Y-%m-%d\")\n```\n\n## What is mean total number of steps taken per day?\n\n```{r echo=TRUE}\n#generate aggregate dataset of steps by date\na<-aggregate(steps~date,wdata,sum)\n\n#generate the histogram\nqplot(a$date,a$steps,geom=\"histogram\",stat=\"identity\",xlab=\"Dates\",ylab=\"Steps\",main=\"Total Steps by Date\")\n\n# generate total mean and median\namedian <- sprintf(\"%0.6f\",median(a$steps))\namean <- sprintf(\"%0.6f\",mean(a$steps))\n```\n\n- Median total steps per day: `r amedian`\n- Mean total steps per day: `r amean`\n\n## What is the average daily activity pattern?\n\n```{r echo=TRUE}\n#aggregate data by interval across all days\nb<-aggregate(steps~interval,wdata,mean)\nsummary(b)\n\n# generate plot\nqplot(b$interval,b$steps,geom=\"line\",xlab=\"Interval\",ylab=\"Steps\",main=\"Total Steps by Interval\")\nbmax<-b$interval[which.max(b$steps)]\n```\n\nMaximum number of steps, on average, during the day, occurred during the `r bmax` interval.\n\n## Addressing missing values\n```{r echo=TRUE}\n## determine # of cases with missing values\nccases<-complete.cases(wdata$steps)\nnacases<-nrow(wdata)-nrow(wdata[ccases,])\n```\n\nWe have `r nacases` records where there is missing data.\nThere are a number of ways to address the missing values.  One could apply a daily mean for every missing interval, or apply the interval average across all missing days.  The problem is that the missing data could also be well outside the norm.  With that observation noted, it seems that filling in the interval with the mean for that interval across the period will distort the data the least (given the variation we see over the daily recording period).\n\n```{r echo=TRUE}\nc<-wdata\nwork<-!complete.cases(c)\nwork1<-which(work)\n\n## we use the z var to build a results matrix for debugging use only\n##z<-NULL\nfor (v in work1) {\n    w<-b[b$interval==c$interval[v],]\n##  z<-rbind(z,cbind(c$interval[v],w$interval,c$steps[v],w$steps))\n    c$steps[v]<-w$steps\n}\n## for debugging purposes:\n##summary(c)\n##z\n\n#aggregate data by date across all intervals\nd<-aggregate(steps~date,c,sum)\nsummary(d)\n\n# generate plot\n#generate the histogram\nqplot(d$date,d$steps,geom=\"histogram\",stat=\"identity\",xlab=\"Dates\",ylab=\"Steps\",main=\"Total Steps by Date\")\ndmax<-d$interval[which.max(d$steps)]\n\n# generate total mean and median\ndmedian <- sprintf(\"%0.6f\",median(d$steps))\ndmean <- sprintf(\"%0.6f\",mean(d$steps))\n\n# more debugging stuff to make sure we didn't mess up valid measurements\n#c[c$date==as.Date(\"2012-10-02\"),]\n#wdata[wdata$date==as.Date(\"2012-10-02\"),]\n#c[c$date==as.Date(\"2012-11-15\"),]\n#wdata[wdata$date==as.Date(\"2012-11-15\"),]\n```\n### Results of addressing the NA step values\nAs modified:\n\n- Median total steps per day `r dmedian`.\n\n- Mean total steps per day `r dmean`.\n\nCompared to the original values:\n\n- Median total steps per day `r amedian`.\n\n- Mean total steps per day `r amean`.\n\nNote the difference in the median values.  \n\nThis shows that, by employing our solution to the NA\nvalue issue, we created a smoothing effect which didn't alter the mean value, but did change the median value, essentiall making the median converge on the mean.\n\n## Are there differences in activity patterns between weekdays and weekends?\n\n```{r echo=TRUE}\n## add factor 'daytype' - values weekday or weekend\ne<-c\ne$daytype<-ifelse(weekdays(e$date) %in% c(\"Sunday\",\"Saturday\"),\"weekend\",\"weekday\")\n\n##do plot\ne11<-e$daytype==\"weekend\"\ne21<-e$daytype==\"weekday\"\ne1<-e[e11,]\ne2<-e[e21,]\nf1<-cbind(aggregate(steps~interval,e1,mean),daytype=\"weekend\")\nf2<-cbind(aggregate(steps~interval,e2,mean),daytype=\"weekday\")\nf<-rbind(f1,f2)\n\np<-ggplot(f,aes(interval,steps))+geom_line()\np<-p+ylab(\"Number of Steps\")\np<-p+facet_wrap(~daytype,nrow=2)\nprint(p)\n```\n\n\nFrom the plot, we can see that there is noticeably less activity on weekdays between the 900 and 1700 interval marks, possibly corresponding to the lower movement activity of some types of day shift workers on weekdays.\n\nOne also notes the increased activity between the 500 and 900 interval marks on weekdays possibly due to the daily ritual of preparing for and arriving at work.\n",
    "created" : 1428901314356.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "570955680",
    "id" : "5FC5F754",
    "lastKnownWriteTime" : 1428901324,
    "path" : "F:/Coursera/Reproducible Research/Project 1/repdata_data_activity/Coursera--Reproducible-Data--Peer-Assessment--1/PA1_template.Rmd",
    "project_path" : "PA1_template.Rmd",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}